<html>
  <head>
    <script src="jquery.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script type="text/javascript" src="trackLiner.js"></script>
    <link href="trackLiner.css" rel="stylesheet" type="text/css" >
    <link href="jquery-ui-1.8.5.custom.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../../butter.js"></script>
    <script type="text/javascript" src="timeline.js"></script>
    <script type="text/javascript">

      var b = new Butter();

      var pluginTray = function( options ) {

        options = options || {};
        var container = document.getElementById( options.target ) || options.target;

        this.addPlugin = function( type ) {

          var pluginElement = document.createElement( "span" );
          pluginElement.innerHTML = type + " ";
          pluginElement.id = type;
          pluginElement.setAttribute( "data-trackliner-type", "butterapp" );
          $( pluginElement ).draggable({ helper: "clone", appendTo: "body", zIndex: 9001, revert: true, revertDuration: 0 });
          container.appendChild( pluginElement );
        };

        for ( var i = 0, l = options.plugins.length; i < l; i++ ) {

          this.addPlugin( options.plugins[ i ] );
        }
      };

      document.addEventListener( "DOMContentLoaded", function() {

        b.addMedia({ name: "video", media: "http://videos-cdn.mozilla.net/serv/webmademovies/Moz_Doc_0329_GetInvolved_ST.webm" });

        var timeLineContainer = document.createElement( "div" );
        timeLineContainer.style.width = "1000px";
        var pluginTrayContainer = document.createElement( "div" );
        document.body.appendChild( pluginTrayContainer );
        document.body.appendChild( timeLineContainer );
        b.timeline({ target: timeLineContainer, duration: 52.25 });
        new pluginTray({ target: pluginTrayContainer, plugins: [ "footnote", "subtitle" ] }).addPlugin( "sugar" );

        document.getElementById( "video" ).addEventListener( "timeupdate", function() {
          b.trigger( "timeupdate", {} );
        }, false );
      }, false );

    </script>
  </head>
  <body>
    <video style="width: 1000px;" id="video" controls src="http://videos-cdn.mozilla.net/serv/webmademovies/Moz_Doc_0329_GetInvolved_ST.webm"></video>
    <div>- Drag these elements -</div>
  </body>
</html>

